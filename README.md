[//]: # ( )
[//]: # (This file is automatically generated by a `metapak`)
[//]: # (module. Do not change it  except between the)
[//]: # (`content:start/end` flags, your changes would)
[//]: # (be overridden.)
[//]: # ( )
# typed-uri-template
> A typed URI template serializer.

[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/nfroidure/typed-uri-template/blob/main/LICENSE)
[![Coverage Status](https://coveralls.io/repos/github/nfroidure/typed-uri-template/badge.svg?branch=main)](https://coveralls.io/github/nfroidure/typed-uri-template?branch=main)


[//]: # (::contents:start)

## Usage

```ts
import {
  URITemplate,
  asString,
  asStrings,
  asNumber,
  asString,
  asBoolean,
} from 'typed-uri-template';

const template = new URITemplate(
  '/~{username}/{+path}/{filename}{?size}{&compressed}',
  {
    username: asString,
    path: asStrings,
    filename: asString,
    size: asNumber,
    compressed: asBoolean,
  },
);

template.serialize({
  username: 'nfroidure',
  path: 'medias/music',
  filename: 'HighwayToHell.mp3',
  size: 10,
  compressed: true,
});
// '/nfroidure/medias/music/HighwayToHell.mp3?size=10&compressed=true'
```

## Matchers

In order to check types, you can define matchers like this:

```ts
import { URITemplate } from 'typed-uri-template';
import { YError } from 'yerror';
import type { ParameterMatcher } from 'typed-uri-template';

type Language = (typeof SUPPORTED_LANGUAGES)[number];

const SUPPORTED_LANGUAGES = ['fr', 'en'] as const;

export const asLanguage: ParameterMatcher<Language> = {
  parse: (s) => {
    const index = SUPPORTED_LANGUAGES.indexOf(s);

    if (index === -1) {
      throw new YError('E_BAD_LANGUAGE', s);
    }
    return SUPPORTED_LANGUAGES[index];
  },
  serialize: (s) => s,
  isValid: (s) => typeof s === 'string' && SUPPORTED_LANGUAGES.includes(s),
  type: 'value',
};

const template = new URITemplate('/blog/{language}/home', {
  language: asLanguage,
});

template.serialize({
  asLanguage: 'fr',
});
// '/blog/{language}/home'
```

A predefined set of matchers is [available here](src/matchers.ts).

[//]: # (::contents:end)

# Authors
- [Nicolas Froidure](http://insertafter.com/en/index.html)

# License
[MIT](https://github.com/nfroidure/typed-uri-template/blob/main/LICENSE)
